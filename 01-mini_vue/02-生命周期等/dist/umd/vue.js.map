{"version":3,"file":"vue.js","sources":["../../src/observer/array.js","../../src/util.js","../../src/observer/index.js","../../src/state.js","../../src/compiler/parse.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/index.js","../../src/global-api/index.js","../../src/index.js"],"sourcesContent":["// 拿到数组原型上的方法 （原来的方法）\nlet oldArrayProtoMethods = Array.prototype;\n\n// 继承一下ES5的方法\nexport let arrayMethods = Object.create(oldArrayProtoMethods);\n\nlet methods = [\"push\", \"pop\", \"shift\", \"unshift\", \"reverse\", \"sort\", \"splice\"];\n\nmethods.forEach((method) => {\n  arrayMethods[method] = function (...args) {\n    // this就是observer里的value\n    const result = oldArrayProtoMethods[method].apply(this, args);\n\n    let inserted;\n    let ob = this.__ob__;\n\n    switch (method) {\n      case \"push\": // arr.push({a:1},{b:2})\n      case \"unshift\": //这两个方法都是追加 追加的内容可能是对象类型，应该被再次进行劫持\n        inserted = args;\n        break;\n      case \"splice\": // vue.$set原理\n        inserted = args.slice(2); // arr.splice(0,1,{a:1},{a:1},{a:1})\n      default:\n        break;\n    }\n    \n    if (inserted) ob.observeArray(inserted); // 给数组新增的值也要进行观测\n    return result;\n  };\n});\n","export function defineProperty(target, key, value) {\n  Object.defineProperty(target, key, {\n    enumerable: false, // 不能被枚举，不能被循环出来\n    configurable: false,\n    value,\n  });\n}\n\nexport function proxy(vm, data, key) {\n  Object.defineProperty(vm, key, {\n    // vm.a\n    get() {\n      return vm[data][key]; // vm._data.a\n    },\n    set(newValue) {\n      // vm.a = 100;\n      vm[data][key] = newValue; // vm._data.a = 100;\n    },\n  });\n}\n\n\nexport const LIFECYCLE_HOOKS = [\n  \"beforeCreate\",\n  \"created\",\n  \"beforeMount\",\n  \"mounted\",\n  \"beforeUpdate\",\n  \"updated\",\n  \"beforeDestroy\",\n  \"destroyed\",\n];\n\nconst strats = {};\nstrats.data = function (parentVal, childValue) {\n  return childValue; // 这里应该有合并data的策略\n};\n// strats.computed = function() {}\n// strats.watch = function() {}\nLIFECYCLE_HOOKS.forEach((hook) => {\n  strats[hook] = mergeHook;\n});\n\nfunction mergeHook(parentVal, childValue) {\n  // 生命周期的合并\n  if (childValue) {\n    if (parentVal) {\n      return parentVal.concat(childValue); // 爸爸和儿子进行拼接\n    } else {\n      return [childValue]; //儿子需要转化成数组\n    }\n  } else {\n    return parentVal; // 不合并了 采用父亲的\n  }\n}\n\n\n// 合并父子对象\nexport function mergeOptions(parent, child) {\n  const options = {};\n  for (let key in parent) {\n    // 父亲和儿子都有的key, 在这就处理了\n    mergeField(key);\n  }\n\n  // 父亲没有儿子有的属性 在这处理\n  for (let key in child) {\n    // 将儿子多的赋予到父亲上\n    if (!parent.hasOwnProperty(key)) {\n      mergeField(key);\n    }\n  }\n\n  function mergeField(key) {\n    // 合并字段\n    // 根据key 不同的策略来进行合并\n    if (strats[key]) {\n      options[key] = strats[key](parent[key], child[key]);\n    } else {\n      // todo默认合并\n      options[key] = child[key];\n    }\n  }\n\n  return options;\n}\n\n\n\n\n\n\n\n\n","import { arrayMethods } from \"./array\";\nimport { defineProperty } from \"../util\";\n\nclass Observer {\n  constructor(value) {\n    // 使用defineProperty 重新定义属性\n\n    // 判断一个对象是否被观测过看他有没有 __ob__这个属性\n    defineProperty(value, \"__ob__\", this);\n    if (Array.isArray(value)) {\n      // 函数劫持/ 切片编程\n      value.__proto__ = arrayMethods;\n      // 观测数组中的对象类型，对象变化也要做一些事\n      this.observeArray(value);\n    } else {\n      this.walk(value);\n    }\n  }\n  observeArray(value) {\n    value.forEach((item) => {\n      observe(item); // 观测数组中的对象类型\n    });\n  }\n\n  walk(data) {\n    let keys = Object.keys(data); // 获取对象的key\n    keys.forEach((key) => {\n      defineReactive(data, key, data[key]); // Vue.util.defineReactive\n    });\n  }\n}\n\nfunction defineReactive(data, key, value) {\n  //注意点1: 嵌套对象的深层监测\n  observe(value);\n\n  Object.defineProperty(data, key, {\n    get() {\n      console.log(`读取了: ${data}${key}`);\n      return value;\n    },\n\n    set(newValue) {\n      if (newValue === value) return;\n      console.log(`准备设置新值了: ${data}${key}`);\n      observe(newValue); // 如果用户将值改为对象继续监控\n      value = newValue;\n    },\n  });\n}\n\nexport function observe(data) {\n  if (typeof data !== \"object\" || data == null) {\n    return data;\n  }\n  if (data.__ob__) {\n    return data;\n  }\n  return new Observer(data);\n}\n","import { observe } from \"./observer/index\";\nimport { proxy } from './util.js';\n\nexport function initState(vm) {\n  // vm.$options\n  const opts = vm.$options;\n  if (opts.props) {\n    initProps(vm);\n  }\n  if (opts.methods) {\n    initMethods(vm);\n  }\n  if (opts.data) {\n    initData(vm);\n  }\n  if (opts.computed) {\n    initComputed(vm);\n  }\n  if (opts.watch) {\n    initWatch(vm);\n  }\n}\n\nfunction initData(vm) {\n  // 数据的初始化操作\n  let data = vm.$options.data;\n  vm._data = data = typeof data == \"function\" ? data.call(vm) : data;\n  \n  // 当我去vm上取属性时 ，帮我将属性的取值代理到vm._data上\n  for(let key in data){\n    proxy(vm,'_data',key);\n  }\n\n  observe(data);\n}\n\nfunction initProps() {}\nfunction initMethods() {}\n\nfunction initComputed() {}\nfunction initWatch() {}\n","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 标签名\n// ?:匹配不捕获\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; // </my:xx>\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>\nconst attribute =\n  /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的    aaa=\"aaa\"  a='aaa'   a=aaa\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的 >    >   <div></div>  <br/>\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // 匹配中括号{{}}\n\n// 数据结构 树、栈、链表、队列、\nlet html = \"\";\nlet root;\nlet currentParent;\nlet stack = [];\n\n// 解析html字符串\nexport function parseHTML(htmlContent) {\n  html = htmlContent;\n\n  // 只要html不为空字符串就一直解析\n  while (html) {\n    let text;\n    // 尝试获取 \"<\" 字符\n    let textEnd = html.indexOf(\"<\");\n    // 如果当前内容以\"<\" 字符开头，说明它肯定是一个标签（开始/结束标签）\n    if (textEnd == 0) {\n      // 尝试匹配 是否是开始标签\n      const startTagMatch = parseStartTag();\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs);\n        console.log(\"处理完开始标签的html--\", html);\n        continue;\n      }\n      // 尝试匹配 是否是结束标签\n      const endTagMatch = html.match(endTag);\n      if (endTagMatch) {\n        advance(endTagMatch[0].length);\n        end(endTagMatch[1]); // 将结束标签传入\n        console.log(\"处理完结束标签的html--\", html);\n        continue;\n      }\n    }\n    // 简化的情况下，说明此时的字符内容是 文本类型\n    if (textEnd > 0) {\n      text = html.substring(0, textEnd);\n    }\n    if (text) {\n      // 处理文本\n      advance(text.length);\n      chars(text);\n      console.log(\"处理完文本类型的html--\", html);\n    }\n    // break;\n  }\n\n  console.log('最后生成的AST树--', root)\n  return root;\n}\n\n// 解析开始标签\nfunction parseStartTag() {\n  const start = html.match(startTagOpen);\n  // 如果start命中，说明是开始标签\n  if (start) {\n    // console.log('start', start)\n    const match = {\n      tagName: start[1],\n      attrs: [],\n    };\n    // 获取到 \"<div\" 里的div后，就删除开始标签(\"<div\")\n    advance(start[0].length);\n    // console.log('html--', html)\n\n    // 如果直接是闭合标签了 说明没有属性\n    let end, attr;\n    // 不是结尾标签 && 能匹配到属性\n    while (\n      !(end = html.match(startTagClose)) &&\n      (attr = html.match(attribute))\n    ) {\n      // attrs的value,可能分别是正则匹配组的第3/4/5个索引值\n      match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] });\n      // 处理/缓存下了开始标签里的属性后，就去掉当前属性对应的 字符内容\n      advance(attr[0].length);\n    }\n    // 如果匹配到开始标签的结束字符，就删除它 \">\" + 返回开始标签的缓存对象\n    if (end) {\n      // console.log('end--', end)\n      advance(end[0].length);\n      return match;\n    }\n  }\n}\n\n// 将字符串进行截取操作 在更新html内容\nfunction advance(n) {\n  html = html.substring(n);\n}\n\n// 创建AST单个节点\nfunction createASTElement(tagName, attrs) {\n  return {\n    tag: tagName, // 标签名\n    type: 1, // 元素类型\n    children: [], // 孩子列表\n    attrs, // 属性集合\n    parent: null, // 父元素\n  };\n}\n\nfunction start(tagName, attrs) {\n  // 创建一个AST元素节点 + 如果没有根元素，就把它作为根元素\n  let element = createASTElement(tagName, attrs);\n  if (!root) {\n    root = element;\n  }\n  // 当前解析的标签 保存起来，用于之后构建树形关系\n  currentParent = element;\n  // 将生成的单个ast元素节点放到栈中\n  stack.push(element);\n}\n// 创建文本类型的AST节点 + 作为子节点放入到父节点中\nfunction chars(text) {\n  text = text.trim();\n  if (text) {\n    currentParent.children.push({\n      type: 3,\n      text,\n    });\n  }\n}\n\n// <div> <p></p> hello</div>    currentParent=p\n// 处理结束标签的情况： 创建父子关系\nfunction end(tagName) {\n  // 在结尾标签处 创建父子关系\n  let element = stack.pop(); // 取出栈中的最后一个AST元素节点\n  currentParent = stack[stack.length - 1];\n  if (currentParent) {\n    // 在闭合时可以知道这个标签的父亲是谁\n    element.parent = currentParent;\n    currentParent.children.push(element);\n  }\n}\n","// 编写 <div id=\"app\" style=\"color:red\"> hello {{name}} <span>hello</span></div>\n\n// 结果:render(){\n//    return _c('div',{id:'app',style:{color:'red'}},_v('hello'+_s(name)),_c('span',null,_v('hello')))\n//}\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n\nexport function generate(el) {\n  let children = genChildren(el); // 儿子的生成\n  let code = `_c('${el.tag}',${\n    el.attrs.length ? `${genProps(el.attrs)}` : \"undefined\"\n  }${children ? `,${children}` : \"\"})`;\n  return code;\n}\n\n//  语法层面的转义\nfunction genProps(attrs) {\n  // [{name: id, value: \"app\"}, {name: style, value: \"fontSize:12px;color:red\"} ]\n  let str = \"\";\n  for (let i = 0; i < attrs.length; i++) {\n    let attr = attrs[i];\n\t\t// 对样式进行特殊的处理\n    if (attr.name === \"style\") {\n      let obj = {}; \n      attr.value.split(\";\").forEach((item) => {\n        let [key, value] = item.split(\":\");\n        obj[key] = value;\n      });\n      attr.value = obj;\n    }\n    str += `${attr.name}:${JSON.stringify(attr.value)},`;\n  }\n\t// 去除最后一个多余的“,” 逗号字符串\n  return `{${str.slice(0, -1)}}`;\n}\n\nfunction genChildren(el) {\n  const children = el.children;\n  if (children) {\n    // 将所有转化后的儿子，用逗号拼接起来\n    return children.map(child => gen(child)).join(\",\");\n  }\n}\n\nfunction gen(node) {\n  if (node.type == 1) {\n\t\t// 递归调用generate，从而生成元素节点的 字符串\n    return generate(node); \n  } else {\n    let text = node.text; // 获取文本\n    // 如果是普通文本，即不带{{}}\n\t\t// _v('hello {{ name }} world {{msg}} aa')   => _v('hello'+_s(name) +'world' + _s(msg))\n    if (!defaultTagRE.test(text)) {\n      return `_v(${JSON.stringify(text)})`; \n    }\n\n\t\t// 处理带有变量的文本内容\n    let tokens = []; // 存放每一段的代码\n    let lastIndex = (defaultTagRE.lastIndex = 0); // 如果正则是全局模式 需要每次使用前置为0\n    let match, index; // 每次匹配到的结果\n    while ((match = defaultTagRE.exec(text))) {\n\t\t\tconsole.log('match--', match)\n      index = match.index; // 保存匹配到的索引\n\t\t\t// 存入变量文本前的 普通文本内容\n      if (index > lastIndex) {\n        tokens.push(JSON.stringify(text.slice(lastIndex, index)));\n      }\n\t\t\t// 存入变量文本内容 + 更新lastIndex指向\n      tokens.push(`_s(${match[1].trim()})`);\n      lastIndex = index + match[0].length;\n    }\n\t\t// 存入变量文本后的 普通文本内容\n    if (lastIndex < text.length) {\n      tokens.push(JSON.stringify(text.slice(lastIndex)));\n    }\n\t\tconsole.log('tokens--', tokens)\n    return `_v(${tokens.join(\"+\")})`;\n  }\n}\n","//  <div id=\"app\">hello {{name}} <span>world</span> <p></p></div>\nimport { parseHTML } from \"./parse.js\";\nimport { generate } from \"./generate\";\n\n\nexport function compileToFunctions(template) {\n  // html模板 => render函数  (ast是用来描述代码的)\n  // 1.需要将html代码转化成\"ast\"语法树 可以用ast树来描述语言本身\n  let ast = parseHTML(template);\n  \n  // 2.优化静态节点\n\n  // 3.通过这课树 重新的生成代码\n  let code = generate(ast);\n  console.log('generateCode--', code)\n\n  // 4.将字符串变成函数 限制取值范围 通过with来进行取值 \n  // 稍后调用render函数就可以通过改变this 让这个函数内部取到结果了\n  let render = new Function(`with(this){return ${code}}`);\n  console.log('render--', render)\n  return render;\n\n}\n","export function patch(oldVnode, vnode) {\n  // 第1次渲染：oldVnode: id#app; vnode: 生成的虚拟dom\n\n  // 将虚拟节点转化成真实节点\n  let el = createElm(vnode); // 产生真实的dom\n  let parentElm = oldVnode.parentNode; // 获取老的app的父亲 => body\n  parentElm.insertBefore(el, oldVnode.nextSibling); // 当前的真实元素插入到app的后面\n  parentElm.removeChild(oldVnode); // 删除老的节点\n}\n\nfunction createElm(vnode) {\n  let { tag, children, key, data, text } = vnode;\n  if (typeof tag == \"string\") {\n    // 创建元素 放到vnode.el上\n    vnode.el = document.createElement(tag);\n\n    // 只有元素才有属性\n    updateProperties(vnode);\n\n    children.forEach((child) => {\n      // 遍历儿子 将儿子渲染后的结果扔到父亲中\n      vnode.el.appendChild(createElm(child));\n    });\n  } else {\n    // 创建文件 放到vnode.el上\n    vnode.el = document.createTextNode(text);\n  }\n  return vnode.el;\n}\n\n// vue 的渲染流程\n//  先初始化数据==> 将模板进行编译==> render函数==>\n//  生成虚拟节点==> 生成真实的dom==> 渲染到页面上\n\nfunction updateProperties(vnode) {\n  let el = vnode.el;\n  let newProps = vnode.data || {};\n  for (let key in newProps) {\n    if (key == \"style\") {\n      // {color:red}\n      for (let styleName in newProps.style) {\n        el.style[styleName] = newProps.style[styleName];\n      }\n    } else if (key == \"class\") {\n      el.className = el.class;\n    } else {\n      el.setAttribute(key, newProps[key]);\n    }\n  }\n}\n","import { patch } from \"./vdom/patch\";\n\nexport function lifecycleMixin(Vue) {\n  Vue.prototype._update = function (vnode) {\n    const vm = this;\n    patch(vm.$el, vnode);\n  };\n}\n\nexport function mountComponent(vm, el) {\n  callHook(vm,'beforeMount')\n\n  // 先调用render方法创建虚拟节点，再将虚拟节点渲染到页面上\n  vm._update(vm._render());\n\n \n  callHook(vm,'mounted');\n}\n\nexport function callHook(vm, hook) {\n  // vm.$options.created  = [a1,a2,a3]\n  const handlers = vm.$options[hook];\n  if (handlers) {\n    for (let i = 0; i < handlers.length; i++) {\n      handlers[i].call(vm); // 更改生命周期中的this\n    }\n  }\n}\n","import { initState } from \"./state\";\nimport { compileToFunctions } from \"./compiler/index\";\nimport { mountComponent, callHook } from \"./lifecycle\";\nimport { mergeOptions } from \"./util\";\n\n\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this;\n    // vm.$options = options;\n    // 需要将用户自定义的options 和全局的options做合并\n    vm.$options = mergeOptions(vm.constructor.options, options);\n    callHook(vm, 'beforeCreate') \n\n    // 初始化状态 （将数据做一个初始化的劫持 当我改变数据时应该更新视图）\n    // vue组件中有很多状态 data props watch computed\n    initState(vm);\n\n    // 在处理完state之后，调用created钩子\n    callHook(vm, 'created')\n\n    // vue里面核心特性 响应式数据原理\n    // Vue 是一个什么样的框架 MVVM\n    // 数据变化视图会更新，视图变化数据会被影响\n    // （MVVM）不能跳过数据去更新视图，$ref\n\n    // 如果当前有el属性说明要渲染模板\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el);\n    }\n  };\n\n  Vue.prototype.$mount = function (el) {\n    // 挂载操作\n    const vm = this;\n    const options = vm.$options;\n    el = document.querySelector(el);\n    vm.$el = el;\n\n    if (!options.render) {\n      // 没render 将template转化成render方法\n      let template = options.template;\n      if (!template && el) {\n        template = el.outerHTML;\n      }\n      // 编译原理 将模板编译成render函数\n      // 渲染时用的都是这个render方法\n      const render = compileToFunctions(template);\n      options.render = render;\n    }\n\n    // 需要挂载这个组件\n    mountComponent(vm, el);\n  };\n}\n","export function renderMixin(Vue) {\n\tVue.prototype._render = function () {\n    const vm = this;\n    const render = vm.$options.render;\n    let vnode = render.call(vm);\n    console.log('vdom/vnode结构是--', vnode);\n    return vnode;\n  }; \n\n  // 用对象来描述dom的解构\n  Vue.prototype._c = function () {\n    // 创建虚拟dom元素\n    return createElement(...arguments);\n  };\n  Vue.prototype._v = function (text) {\n    // 创建虚拟dom文本元素\n    return createTextVnode(text);\n  };\n  Vue.prototype._s = function (val) {\n    // stringify\n    return val == null\n      ? \"\"\n      : typeof val == \"object\"\n      ? JSON.stringify(val)\n      : val;\n  };\n}\n\n// _c('div',{},_v(),_c())\nfunction createElement(tag, data = {}, ...children) {\n  return vnode(tag, data, data.key, children);\n}\nfunction createTextVnode(text) {\n  return vnode(undefined, undefined, undefined, undefined, text);\n}\n// 用来产生虚拟dom的\nfunction vnode(tag, data, key, children, text) {\n  return {\n    tag,\n    data,\n    key,\n    children,\n    text,\n  };\n}\n","import { mergeOptions } from \"../util\";\n\nexport function initGlobalApi(Vue) {\n  Vue.options = {}; // Vue.components/ Vue.diretive\n  Vue.mixin = function (mixin) {\n    // 合并对象: 目前先考虑生命周期，不考虑其他的合并 data/ computed/ watch\n    // 把 全局Vue.options和 Vue.mixin等进行合并\n\t\tthis.options = mergeOptions(this.options, mixin);\n  };\n}\n","import { initMixin } from \"./init\";\nimport { lifecycleMixin } from \"./lifecycle\";\nimport { renderMixin } from \"./vdom/index\";\nimport { initGlobalApi } from './global-api/index';\n\nfunction Vue(options) {\n  this._init(options); // 入口方法,做初始化操作\n}\n\n// 写成一个个的插件进行对原型的扩展\ninitMixin(Vue);  // init方法\nlifecycleMixin(Vue);  // _update\nrenderMixin(Vue);  // _render\n\n// 静态方法 Vue.component、Vue.directive、Vue.extend、Vue.mixin ...\ninitGlobalApi(Vue);\n\n\nexport default Vue;\n"],"names":["oldArrayProtoMethods","Array","prototype","arrayMethods","Object","create","methods","forEach","method","_len","arguments","length","args","_key","result","apply","inserted","ob","__ob__","slice","observeArray","defineProperty","target","key","value","enumerable","configurable","proxy","vm","data","get","set","newValue","LIFECYCLE_HOOKS","strats","parentVal","childValue","hook","mergeHook","concat","mergeOptions","parent","child","options","mergeField","hasOwnProperty","Observer","_classCallCheck","isArray","__proto__","walk","_createClass","item","observe","keys","defineReactive","console","log","_typeof","initState","opts","$options","props","initData","computed","watch","_data","call","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","html","root","currentParent","stack","parseHTML","htmlContent","text","textEnd","indexOf","startTagMatch","parseStartTag","start","tagName","attrs","endTagMatch","match","advance","end","substring","chars","attr","push","name","n","createASTElement","tag","type","children","element","trim","pop","defaultTagRE","generate","el","genChildren","code","genProps","str","_loop","i","obj","split","_item$split","_item$split2","_slicedToArray","JSON","stringify","map","gen","join","node","test","tokens","lastIndex","index","exec","compileToFunctions","template","ast","render","Function","patch","oldVnode","vnode","createElm","parentElm","parentNode","insertBefore","nextSibling","removeChild","document","createElement","updateProperties","appendChild","createTextNode","newProps","styleName","style","className","setAttribute","lifecycleMixin","Vue","_update","$el","mountComponent","callHook","_render","handlers","initMixin","_init","constructor","$mount","querySelector","outerHTML","renderMixin","_c","_v","createTextVnode","_s","val","undefined","initGlobalApi","mixin"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAA;EACA,IAAIA,oBAAoB,GAAGC,KAAK,CAACC,SAAS,CAAA;;EAE1C;EACO,IAAIC,YAAY,GAAGC,MAAM,CAACC,MAAM,CAACL,oBAAoB,CAAC,CAAA;EAE7D,IAAIM,OAAO,GAAG,CAAC,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,SAAS,EAAE,SAAS,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAA;EAE9EA,OAAO,CAACC,OAAO,CAAC,UAACC,MAAM,EAAK;EAC1BL,EAAAA,YAAY,CAACK,MAAM,CAAC,GAAG,YAAmB;EAAA,IAAA,KAAA,IAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAANC,IAAI,GAAAX,IAAAA,KAAA,CAAAQ,IAAA,GAAAI,IAAA,GAAA,CAAA,EAAAA,IAAA,GAAAJ,IAAA,EAAAI,IAAA,EAAA,EAAA;EAAJD,MAAAA,IAAI,CAAAC,IAAA,CAAAH,GAAAA,SAAA,CAAAG,IAAA,CAAA,CAAA;EAAA,KAAA;EACtC;EACA,IAAA,IAAMC,MAAM,GAAGd,oBAAoB,CAACQ,MAAM,CAAC,CAACO,KAAK,CAAC,IAAI,EAAEH,IAAI,CAAC,CAAA;EAE7D,IAAA,IAAII,QAAQ,CAAA;EACZ,IAAA,IAAIC,EAAE,GAAG,IAAI,CAACC,MAAM,CAAA;EAEpB,IAAA,QAAQV,MAAM;QACZ,KAAK,MAAM,CAAC;EACZ,MAAA,KAAK,SAAS;EAAE;EACdQ,QAAAA,QAAQ,GAAGJ,IAAI,CAAA;EACf,QAAA,MAAA;EACF,MAAA,KAAK,QAAQ;EAAE;EACbI,QAAAA,QAAQ,GAAGJ,IAAI,CAACO,KAAK,CAAC,CAAC,CAAC,CAAA;EAG5B,KAAA;MAEA,IAAIH,QAAQ,EAAEC,EAAE,CAACG,YAAY,CAACJ,QAAQ,CAAC,CAAC;EACxC,IAAA,OAAOF,MAAM,CAAA;KACd,CAAA;EACH,CAAC,CAAC;;EC9BK,SAASO,cAAcA,CAACC,MAAM,EAAEC,GAAG,EAAEC,KAAK,EAAE;EACjDpB,EAAAA,MAAM,CAACiB,cAAc,CAACC,MAAM,EAAEC,GAAG,EAAE;EACjCE,IAAAA,UAAU,EAAE,KAAK;EAAE;EACnBC,IAAAA,YAAY,EAAE,KAAK;EACnBF,IAAAA,KAAK,EAALA,KAAAA;EACF,GAAC,CAAC,CAAA;EACJ,CAAA;EAEO,SAASG,KAAKA,CAACC,EAAE,EAAEC,IAAI,EAAEN,GAAG,EAAE;EACnCnB,EAAAA,MAAM,CAACiB,cAAc,CAACO,EAAE,EAAEL,GAAG,EAAE;EAC7B;MACAO,GAAG,EAAA,SAAAA,MAAG;QACJ,OAAOF,EAAE,CAACC,IAAI,CAAC,CAACN,GAAG,CAAC,CAAC;OACtB;MACDQ,GAAG,EAAA,SAAAA,GAACC,CAAAA,QAAQ,EAAE;EACZ;QACAJ,EAAE,CAACC,IAAI,CAAC,CAACN,GAAG,CAAC,GAAGS,QAAQ,CAAC;EAC3B,KAAA;EACF,GAAC,CAAC,CAAA;EACJ,CAAA;;EAGO,IAAMC,eAAe,GAAG,CAC7B,cAAc,EACd,SAAS,EACT,aAAa,EACb,SAAS,EACT,cAAc,EACd,SAAS,EACT,eAAe,EACf,WAAW,CACZ,CAAA;EAED,IAAMC,MAAM,GAAG,EAAE,CAAA;EACjBA,MAAM,CAACL,IAAI,GAAG,UAAUM,SAAS,EAAEC,UAAU,EAAE;IAC7C,OAAOA,UAAU,CAAC;EACpB,CAAC,CAAA;EACD;EACA;EACAH,eAAe,CAAC1B,OAAO,CAAC,UAAC8B,IAAI,EAAK;EAChCH,EAAAA,MAAM,CAACG,IAAI,CAAC,GAAGC,SAAS,CAAA;EAC1B,CAAC,CAAC,CAAA;EAEF,SAASA,SAASA,CAACH,SAAS,EAAEC,UAAU,EAAE;EACxC;EACA,EAAA,IAAIA,UAAU,EAAE;EACd,IAAA,IAAID,SAAS,EAAE;EACb,MAAA,OAAOA,SAAS,CAACI,MAAM,CAACH,UAAU,CAAC,CAAC;EACtC,KAAC,MAAM;EACL,MAAA,OAAO,CAACA,UAAU,CAAC,CAAC;EACtB,KAAA;EACF,GAAC,MAAM;MACL,OAAOD,SAAS,CAAC;EACnB,GAAA;EACF,CAAA;;EAGA;EACO,SAASK,YAAYA,CAACC,MAAM,EAAEC,KAAK,EAAE;IAC1C,IAAMC,OAAO,GAAG,EAAE,CAAA;EAClB,EAAA,KAAK,IAAIpB,GAAG,IAAIkB,MAAM,EAAE;EACtB;MACAG,UAAU,CAACrB,GAAG,CAAC,CAAA;EACjB,GAAA;;EAEA;EACA,EAAA,KAAK,IAAIA,IAAG,IAAImB,KAAK,EAAE;EACrB;EACA,IAAA,IAAI,CAACD,MAAM,CAACI,cAAc,CAACtB,IAAG,CAAC,EAAE;QAC/BqB,UAAU,CAACrB,IAAG,CAAC,CAAA;EACjB,KAAA;EACF,GAAA;IAEA,SAASqB,UAAUA,CAACrB,GAAG,EAAE;EACvB;EACA;EACA,IAAA,IAAIW,MAAM,CAACX,GAAG,CAAC,EAAE;EACfoB,MAAAA,OAAO,CAACpB,GAAG,CAAC,GAAGW,MAAM,CAACX,GAAG,CAAC,CAACkB,MAAM,CAAClB,GAAG,CAAC,EAAEmB,KAAK,CAACnB,GAAG,CAAC,CAAC,CAAA;EACrD,KAAC,MAAM;EACL;EACAoB,MAAAA,OAAO,CAACpB,GAAG,CAAC,GAAGmB,KAAK,CAACnB,GAAG,CAAC,CAAA;EAC3B,KAAA;EACF,GAAA;EAEA,EAAA,OAAOoB,OAAO,CAAA;EAChB;;ECpFyC,IAEnCG,QAAQ,gBAAA,YAAA;IACZ,SAAAA,QAAAA,CAAYtB,KAAK,EAAE;EAAAuB,IAAAA,eAAA,OAAAD,QAAA,CAAA,CAAA;EACjB;;EAEA;EACAzB,IAAAA,cAAc,CAACG,KAAK,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAA;EACrC,IAAA,IAAIvB,KAAK,CAAC+C,OAAO,CAACxB,KAAK,CAAC,EAAE;EACxB;QACAA,KAAK,CAACyB,SAAS,GAAG9C,YAAY,CAAA;EAC9B;EACA,MAAA,IAAI,CAACiB,YAAY,CAACI,KAAK,CAAC,CAAA;EAC1B,KAAC,MAAM;EACL,MAAA,IAAI,CAAC0B,IAAI,CAAC1B,KAAK,CAAC,CAAA;EAClB,KAAA;EACF,GAAA;EAAC2B,EAAAA,YAAA,CAAAL,QAAA,EAAA,CAAA;MAAAvB,GAAA,EAAA,cAAA;EAAAC,IAAAA,KAAA,EACD,SAAAJ,YAAaI,CAAAA,KAAK,EAAE;EAClBA,MAAAA,KAAK,CAACjB,OAAO,CAAC,UAAC6C,IAAI,EAAK;EACtBC,QAAAA,OAAO,CAACD,IAAI,CAAC,CAAC;EAChB,OAAC,CAAC,CAAA;EACJ,KAAA;EAAC,GAAA,EAAA;MAAA7B,GAAA,EAAA,MAAA;EAAAC,IAAAA,KAAA,EAED,SAAA0B,IAAKrB,CAAAA,IAAI,EAAE;QACT,IAAIyB,IAAI,GAAGlD,MAAM,CAACkD,IAAI,CAACzB,IAAI,CAAC,CAAC;EAC7ByB,MAAAA,IAAI,CAAC/C,OAAO,CAAC,UAACgB,GAAG,EAAK;UACpBgC,cAAc,CAAC1B,IAAI,EAAEN,GAAG,EAAEM,IAAI,CAACN,GAAG,CAAC,CAAC,CAAC;EACvC,OAAC,CAAC,CAAA;EACJ,KAAA;EAAC,GAAA,CAAA,CAAA,CAAA;EAAA,EAAA,OAAAuB,QAAA,CAAA;EAAA,CAAA,EAAA,CAAA;EAGH,SAASS,cAAcA,CAAC1B,IAAI,EAAEN,GAAG,EAAEC,KAAK,EAAE;EACxC;IACA6B,OAAO,CAAC7B,KAAK,CAAC,CAAA;EAEdpB,EAAAA,MAAM,CAACiB,cAAc,CAACQ,IAAI,EAAEN,GAAG,EAAE;MAC/BO,GAAG,EAAA,SAAAA,MAAG;QACJ0B,OAAO,CAACC,GAAG,CAAA,sBAAA,CAAAlB,MAAA,CAASV,IAAI,CAAA,CAAAU,MAAA,CAAGhB,GAAG,CAAE,CAAC,CAAA;EACjC,MAAA,OAAOC,KAAK,CAAA;OACb;MAEDO,GAAG,EAAA,SAAAA,GAACC,CAAAA,QAAQ,EAAE;QACZ,IAAIA,QAAQ,KAAKR,KAAK,EAAE,OAAA;QACxBgC,OAAO,CAACC,GAAG,CAAA,8CAAA,CAAAlB,MAAA,CAAaV,IAAI,CAAA,CAAAU,MAAA,CAAGhB,GAAG,CAAE,CAAC,CAAA;EACrC8B,MAAAA,OAAO,CAACrB,QAAQ,CAAC,CAAC;EAClBR,MAAAA,KAAK,GAAGQ,QAAQ,CAAA;EAClB,KAAA;EACF,GAAC,CAAC,CAAA;EACJ,CAAA;EAEO,SAASqB,OAAOA,CAACxB,IAAI,EAAE;IAC5B,IAAI6B,OAAA,CAAO7B,IAAI,CAAA,KAAK,QAAQ,IAAIA,IAAI,IAAI,IAAI,EAAE;EAC5C,IAAA,OAAOA,IAAI,CAAA;EACb,GAAA;IACA,IAAIA,IAAI,CAACX,MAAM,EAAE;EACf,IAAA,OAAOW,IAAI,CAAA;EACb,GAAA;EACA,EAAA,OAAO,IAAIiB,QAAQ,CAACjB,IAAI,CAAC,CAAA;EAC3B;;ECxDO,SAAS8B,SAASA,CAAC/B,EAAE,EAAE;EAC5B;EACA,EAAA,IAAMgC,IAAI,GAAGhC,EAAE,CAACiC,QAAQ,CAAA;IACxB,IAAID,IAAI,CAACE,KAAK,EAAE,CAEhB;IACA,IAAIF,IAAI,CAACtD,OAAO,EAAE,CAElB;IACA,IAAIsD,IAAI,CAAC/B,IAAI,EAAE;MACbkC,QAAQ,CAACnC,EAAE,CAAC,CAAA;EACd,GAAA;IACA,IAAIgC,IAAI,CAACI,QAAQ,EAAE,CAEnB;IACA,IAAIJ,IAAI,CAACK,KAAK,EAAE,CAEhB;EACF,CAAA;EAEA,SAASF,QAAQA,CAACnC,EAAE,EAAE;EACpB;EACA,EAAA,IAAIC,IAAI,GAAGD,EAAE,CAACiC,QAAQ,CAAChC,IAAI,CAAA;EAC3BD,EAAAA,EAAE,CAACsC,KAAK,GAAGrC,IAAI,GAAG,OAAOA,IAAI,IAAI,UAAU,GAAGA,IAAI,CAACsC,IAAI,CAACvC,EAAE,CAAC,GAAGC,IAAI,CAAA;;EAElE;EACA,EAAA,KAAI,IAAIN,GAAG,IAAIM,IAAI,EAAC;EAClBF,IAAAA,KAAK,CAACC,EAAE,EAAC,OAAO,EAACL,GAAG,CAAC,CAAA;EACvB,GAAA;IAEA8B,OAAO,CAACxB,IAAI,CAAC,CAAA;EACf;;EClCA,IAAMuC,MAAM,GAAiC,8BAAA,CAAC;EAC9C;EACA,IAAMC,YAAY,GAAA9B,MAAAA,CAAAA,MAAA,CAAU6B,MAAM,EAAA7B,OAAAA,CAAAA,CAAAA,MAAA,CAAQ6B,MAAM,EAAG,GAAA,CAAA,CAAC;EACpD,IAAME,YAAY,GAAG,IAAIC,MAAM,CAAA,IAAA,CAAAhC,MAAA,CAAM8B,YAAY,CAAE,CAAC,CAAC;EACrD,IAAMG,MAAM,GAAG,IAAID,MAAM,CAAA,OAAA,CAAAhC,MAAA,CAAS8B,YAAY,EAAA,QAAA,CAAQ,CAAC,CAAC;EACxD,IAAMI,SAAS,GACb,2EAA2E,CAAC;EAC9E,IAAMC,aAAa,GAAG,YAAY,CAAC;;EAGnC;EACA,IAAIC,IAAI,GAAG,EAAE,CAAA;EACb,IAAIC,IAAI,CAAA;EACR,IAAIC,aAAa,CAAA;EACjB,IAAIC,KAAK,GAAG,EAAE,CAAA;;EAEd;EACO,SAASC,SAASA,CAACC,WAAW,EAAE;EACrCL,EAAAA,IAAI,GAAGK,WAAW,CAAA;;EAElB;EACA,EAAA,OAAOL,IAAI,EAAE;EACX,IAAA,IAAIM,IAAI,GAAA,KAAA,CAAA,CAAA;EACR;EACA,IAAA,IAAIC,OAAO,GAAGP,IAAI,CAACQ,OAAO,CAAC,GAAG,CAAC,CAAA;EAC/B;MACA,IAAID,OAAO,IAAI,CAAC,EAAE;EAChB;EACA,MAAA,IAAME,aAAa,GAAGC,aAAa,EAAE,CAAA;EACrC,MAAA,IAAID,aAAa,EAAE;UACjBE,KAAK,CAACF,aAAa,CAACG,OAAO,EAAEH,aAAa,CAACI,KAAK,CAAC,CAAA;EACjDhC,QAAAA,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEkB,IAAI,CAAC,CAAA;EACnC,QAAA,SAAA;EACF,OAAA;EACA;EACA,MAAA,IAAMc,WAAW,GAAGd,IAAI,CAACe,KAAK,CAAClB,MAAM,CAAC,CAAA;EACtC,MAAA,IAAIiB,WAAW,EAAE;EACfE,QAAAA,OAAO,CAACF,WAAW,CAAC,CAAC,CAAC,CAAC9E,MAAM,CAAC,CAAA;EAC9BiF,QAAAA,GAAG,CAACH,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;EACpBjC,QAAAA,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEkB,IAAI,CAAC,CAAA;EACnC,QAAA,SAAA;EACF,OAAA;EACF,KAAA;EACA;MACA,IAAIO,OAAO,GAAG,CAAC,EAAE;QACfD,IAAI,GAAGN,IAAI,CAACkB,SAAS,CAAC,CAAC,EAAEX,OAAO,CAAC,CAAA;EACnC,KAAA;EACA,IAAA,IAAID,IAAI,EAAE;EACR;EACAU,MAAAA,OAAO,CAACV,IAAI,CAACtE,MAAM,CAAC,CAAA;QACpBmF,KAAK,CAACb,IAAI,CAAC,CAAA;EACXzB,MAAAA,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEkB,IAAI,CAAC,CAAA;EACrC,KAAA;EACA;EACF,GAAA;;EAEAnB,EAAAA,OAAO,CAACC,GAAG,CAAC,aAAa,EAAEmB,IAAI,CAAC,CAAA;EAChC,EAAA,OAAOA,IAAI,CAAA;EACb,CAAA;;EAEA;EACA,SAASS,aAAaA,GAAG;EACvB,EAAA,IAAMC,KAAK,GAAGX,IAAI,CAACe,KAAK,CAACpB,YAAY,CAAC,CAAA;EACtC;EACA,EAAA,IAAIgB,KAAK,EAAE;EACT;EACA,IAAA,IAAMI,KAAK,GAAG;EACZH,MAAAA,OAAO,EAAED,KAAK,CAAC,CAAC,CAAC;EACjBE,MAAAA,KAAK,EAAE,EAAA;OACR,CAAA;EACD;EACAG,IAAAA,OAAO,CAACL,KAAK,CAAC,CAAC,CAAC,CAAC3E,MAAM,CAAC,CAAA;EACxB;;EAEA;MACA,IAAIiF,IAAG,EAAEG,IAAI,CAAA;EACb;MACA,OACE,EAAEH,IAAG,GAAGjB,IAAI,CAACe,KAAK,CAAChB,aAAa,CAAC,CAAC,KACjCqB,IAAI,GAAGpB,IAAI,CAACe,KAAK,CAACjB,SAAS,CAAC,CAAC,EAC9B;EACA;EACAiB,MAAAA,KAAK,CAACF,KAAK,CAACQ,IAAI,CAAC;EAAEC,QAAAA,IAAI,EAAEF,IAAI,CAAC,CAAC,CAAC;EAAEvE,QAAAA,KAAK,EAAEuE,IAAI,CAAC,CAAC,CAAC,IAAIA,IAAI,CAAC,CAAC,CAAC,IAAIA,IAAI,CAAC,CAAC,CAAA;EAAE,OAAC,CAAC,CAAA;EACzE;EACAJ,MAAAA,OAAO,CAACI,IAAI,CAAC,CAAC,CAAC,CAACpF,MAAM,CAAC,CAAA;EACzB,KAAA;EACA;EACA,IAAA,IAAIiF,IAAG,EAAE;EACP;EACAD,MAAAA,OAAO,CAACC,IAAG,CAAC,CAAC,CAAC,CAACjF,MAAM,CAAC,CAAA;EACtB,MAAA,OAAO+E,KAAK,CAAA;EACd,KAAA;EACF,GAAA;EACF,CAAA;;EAEA;EACA,SAASC,OAAOA,CAACO,CAAC,EAAE;EAClBvB,EAAAA,IAAI,GAAGA,IAAI,CAACkB,SAAS,CAACK,CAAC,CAAC,CAAA;EAC1B,CAAA;;EAEA;EACA,SAASC,gBAAgBA,CAACZ,OAAO,EAAEC,KAAK,EAAE;IACxC,OAAO;EACLY,IAAAA,GAAG,EAAEb,OAAO;EAAE;EACdc,IAAAA,IAAI,EAAE,CAAC;EAAE;EACTC,IAAAA,QAAQ,EAAE,EAAE;EAAE;EACdd,IAAAA,KAAK,EAALA,KAAK;EAAE;MACP/C,MAAM,EAAE,IAAI;KACb,CAAA;EACH,CAAA;;EAEA,SAAS6C,KAAKA,CAACC,OAAO,EAAEC,KAAK,EAAE;EAC7B;EACA,EAAA,IAAIe,OAAO,GAAGJ,gBAAgB,CAACZ,OAAO,EAAEC,KAAK,CAAC,CAAA;IAC9C,IAAI,CAACZ,IAAI,EAAE;EACTA,IAAAA,IAAI,GAAG2B,OAAO,CAAA;EAChB,GAAA;EACA;EACA1B,EAAAA,aAAa,GAAG0B,OAAO,CAAA;EACvB;EACAzB,EAAAA,KAAK,CAACkB,IAAI,CAACO,OAAO,CAAC,CAAA;EACrB,CAAA;EACA;EACA,SAAST,KAAKA,CAACb,IAAI,EAAE;EACnBA,EAAAA,IAAI,GAAGA,IAAI,CAACuB,IAAI,EAAE,CAAA;EAClB,EAAA,IAAIvB,IAAI,EAAE;EACRJ,IAAAA,aAAa,CAACyB,QAAQ,CAACN,IAAI,CAAC;EAC1BK,MAAAA,IAAI,EAAE,CAAC;EACPpB,MAAAA,IAAI,EAAJA,IAAAA;EACF,KAAC,CAAC,CAAA;EACJ,GAAA;EACF,CAAA;;EAEA;EACA;EACA,SAASW,GAAGA,CAACL,OAAO,EAAE;EACpB;IACA,IAAIgB,OAAO,GAAGzB,KAAK,CAAC2B,GAAG,EAAE,CAAC;IAC1B5B,aAAa,GAAGC,KAAK,CAACA,KAAK,CAACnE,MAAM,GAAG,CAAC,CAAC,CAAA;EACvC,EAAA,IAAIkE,aAAa,EAAE;EACjB;MACA0B,OAAO,CAAC9D,MAAM,GAAGoC,aAAa,CAAA;EAC9BA,IAAAA,aAAa,CAACyB,QAAQ,CAACN,IAAI,CAACO,OAAO,CAAC,CAAA;EACtC,GAAA;EACF;;EChJA;;EAEA;EACA;EACA;EACA,IAAMG,YAAY,GAAG,0BAA0B,CAAA;EAExC,SAASC,QAAQA,CAACC,EAAE,EAAE;EAC3B,EAAA,IAAIN,QAAQ,GAAGO,WAAW,CAACD,EAAE,CAAC,CAAC;EAC/B,EAAA,IAAIE,IAAI,GAAAvE,MAAAA,CAAAA,MAAA,CAAUqE,EAAE,CAACR,GAAG,EAAA,IAAA,CAAA,CAAA7D,MAAA,CACtBqE,EAAE,CAACpB,KAAK,CAAC7E,MAAM,MAAA4B,MAAA,CAAMwE,QAAQ,CAACH,EAAE,CAACpB,KAAK,CAAC,CAAA,GAAK,WAAW,CAAAjD,CAAAA,MAAA,CACtD+D,QAAQ,OAAA/D,MAAA,CAAO+D,QAAQ,CAAA,GAAK,EAAE,EAAG,GAAA,CAAA,CAAA;EACpC,EAAA,OAAOQ,IAAI,CAAA;EACb,CAAA;;EAEA;EACA,SAASC,QAAQA,CAACvB,KAAK,EAAE;EACvB;IACA,IAAIwB,GAAG,GAAG,EAAE,CAAA;IAAC,IAAAC,KAAA,GAAAA,SAAAA,KAAAA,GAC0B;EACrC,IAAA,IAAIlB,IAAI,GAAGP,KAAK,CAAC0B,CAAC,CAAC,CAAA;EACrB;EACE,IAAA,IAAInB,IAAI,CAACE,IAAI,KAAK,OAAO,EAAE;QACzB,IAAIkB,GAAG,GAAG,EAAE,CAAA;EACZpB,MAAAA,IAAI,CAACvE,KAAK,CAAC4F,KAAK,CAAC,GAAG,CAAC,CAAC7G,OAAO,CAAC,UAAC6C,IAAI,EAAK;EACtC,QAAA,IAAAiE,WAAA,GAAmBjE,IAAI,CAACgE,KAAK,CAAC,GAAG,CAAC;YAAAE,YAAA,GAAAC,cAAA,CAAAF,WAAA,EAAA,CAAA,CAAA;EAA7B9F,UAAAA,GAAG,GAAA+F,YAAA,CAAA,CAAA,CAAA;EAAE9F,UAAAA,KAAK,GAAA8F,YAAA,CAAA,CAAA,CAAA,CAAA;EACfH,QAAAA,GAAG,CAAC5F,GAAG,CAAC,GAAGC,KAAK,CAAA;EAClB,OAAC,CAAC,CAAA;QACFuE,IAAI,CAACvE,KAAK,GAAG2F,GAAG,CAAA;EAClB,KAAA;EACAH,IAAAA,GAAG,OAAAzE,MAAA,CAAOwD,IAAI,CAACE,IAAI,EAAA1D,GAAAA,CAAAA,CAAAA,MAAA,CAAIiF,IAAI,CAACC,SAAS,CAAC1B,IAAI,CAACvE,KAAK,CAAC,EAAG,GAAA,CAAA,CAAA;KACrD,CAAA;EAZD,EAAA,KAAK,IAAI0F,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG1B,KAAK,CAAC7E,MAAM,EAAEuG,CAAC,EAAE,EAAA;MAAAD,KAAA,EAAA,CAAA;EAAA,GAAA;EAatC;IACC,OAAA1E,GAAAA,CAAAA,MAAA,CAAWyE,GAAG,CAAC7F,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAA,GAAA,CAAA,CAAA;EAC7B,CAAA;EAEA,SAAS0F,WAAWA,CAACD,EAAE,EAAE;EACvB,EAAA,IAAMN,QAAQ,GAAGM,EAAE,CAACN,QAAQ,CAAA;EAC5B,EAAA,IAAIA,QAAQ,EAAE;EACZ;EACA,IAAA,OAAOA,QAAQ,CAACoB,GAAG,CAAC,UAAAhF,KAAK,EAAA;QAAA,OAAIiF,GAAG,CAACjF,KAAK,CAAC,CAAA;EAAA,KAAA,CAAC,CAACkF,IAAI,CAAC,GAAG,CAAC,CAAA;EACpD,GAAA;EACF,CAAA;EAEA,SAASD,GAAGA,CAACE,IAAI,EAAE;EACjB,EAAA,IAAIA,IAAI,CAACxB,IAAI,IAAI,CAAC,EAAE;EACpB;MACE,OAAOM,QAAQ,CAACkB,IAAI,CAAC,CAAA;EACvB,GAAC,MAAM;EACL,IAAA,IAAI5C,IAAI,GAAG4C,IAAI,CAAC5C,IAAI,CAAC;EACrB;EACF;EACE,IAAA,IAAI,CAACyB,YAAY,CAACoB,IAAI,CAAC7C,IAAI,CAAC,EAAE;EAC5B,MAAA,OAAA,KAAA,CAAA1C,MAAA,CAAaiF,IAAI,CAACC,SAAS,CAACxC,IAAI,CAAC,EAAA,GAAA,CAAA,CAAA;EACnC,KAAA;;EAEF;EACE,IAAA,IAAI8C,MAAM,GAAG,EAAE,CAAC;MAChB,IAAIC,SAAS,GAAItB,YAAY,CAACsB,SAAS,GAAG,CAAE,CAAC;EAC7C,IAAA,IAAItC,KAAK,EAAEuC,KAAK,CAAC;MACjB,OAAQvC,KAAK,GAAGgB,YAAY,CAACwB,IAAI,CAACjD,IAAI,CAAC,EAAG;EAC3CzB,MAAAA,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEiC,KAAK,CAAC,CAAA;EAC1BuC,MAAAA,KAAK,GAAGvC,KAAK,CAACuC,KAAK,CAAC;EACvB;QACG,IAAIA,KAAK,GAAGD,SAAS,EAAE;EACrBD,QAAAA,MAAM,CAAC/B,IAAI,CAACwB,IAAI,CAACC,SAAS,CAACxC,IAAI,CAAC9D,KAAK,CAAC6G,SAAS,EAAEC,KAAK,CAAC,CAAC,CAAC,CAAA;EAC3D,OAAA;EACH;EACGF,MAAAA,MAAM,CAAC/B,IAAI,CAAAzD,KAAAA,CAAAA,MAAA,CAAOmD,KAAK,CAAC,CAAC,CAAC,CAACc,IAAI,EAAE,MAAG,CAAC,CAAA;QACrCwB,SAAS,GAAGC,KAAK,GAAGvC,KAAK,CAAC,CAAC,CAAC,CAAC/E,MAAM,CAAA;EACrC,KAAA;EACF;EACE,IAAA,IAAIqH,SAAS,GAAG/C,IAAI,CAACtE,MAAM,EAAE;EAC3BoH,MAAAA,MAAM,CAAC/B,IAAI,CAACwB,IAAI,CAACC,SAAS,CAACxC,IAAI,CAAC9D,KAAK,CAAC6G,SAAS,CAAC,CAAC,CAAC,CAAA;EACpD,KAAA;EACFxE,IAAAA,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEsE,MAAM,CAAC,CAAA;EAC7B,IAAA,OAAA,KAAA,CAAAxF,MAAA,CAAawF,MAAM,CAACH,IAAI,CAAC,GAAG,CAAC,EAAA,GAAA,CAAA,CAAA;EAC/B,GAAA;EACF;;EC9EA;EAKO,SAASO,kBAAkBA,CAACC,QAAQ,EAAE;EAC3C;EACA;EACA,EAAA,IAAIC,GAAG,GAAGtD,SAAS,CAACqD,QAAQ,CAAC,CAAA;;EAE7B;;EAEA;EACA,EAAA,IAAItB,IAAI,GAAGH,QAAQ,CAAC0B,GAAG,CAAC,CAAA;EACxB7E,EAAAA,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEqD,IAAI,CAAC,CAAA;;EAEnC;EACA;IACA,IAAIwB,MAAM,GAAG,IAAIC,QAAQ,sBAAAhG,MAAA,CAAsBuE,IAAI,EAAA,GAAA,CAAG,CAAC,CAAA;EACvDtD,EAAAA,OAAO,CAACC,GAAG,CAAC,UAAU,EAAE6E,MAAM,CAAC,CAAA;EAC/B,EAAA,OAAOA,MAAM,CAAA;EAEf;;ECtBO,SAASE,KAAKA,CAACC,QAAQ,EAAEC,KAAK,EAAE;EACrC;;EAEA;EACA,EAAA,IAAI9B,EAAE,GAAG+B,SAAS,CAACD,KAAK,CAAC,CAAC;EAC1B,EAAA,IAAIE,SAAS,GAAGH,QAAQ,CAACI,UAAU,CAAC;IACpCD,SAAS,CAACE,YAAY,CAAClC,EAAE,EAAE6B,QAAQ,CAACM,WAAW,CAAC,CAAC;EACjDH,EAAAA,SAAS,CAACI,WAAW,CAACP,QAAQ,CAAC,CAAC;EAClC,CAAA;;EAEA,SAASE,SAASA,CAACD,KAAK,EAAE;EACxB,EAAA,IAAMtC,GAAG,GAAgCsC,KAAK,CAAxCtC,GAAG,CAAA;MAAEE,QAAQ,GAAsBoC,KAAK,CAAnCpC,QAAQ,CAAA;MAAsBoC,KAAK,CAAzBnH,GAAG,CAAA;MAAiBmH,KAAK,CAApB7G,IAAI,CAAA;UAAEoD,IAAI,GAAKyD,KAAK,CAAdzD,KAAI;EACpC,EAAA,IAAI,OAAOmB,GAAG,IAAI,QAAQ,EAAE;EAC1B;MACAsC,KAAK,CAAC9B,EAAE,GAAGqC,QAAQ,CAACC,aAAa,CAAC9C,GAAG,CAAC,CAAA;;EAEtC;MACA+C,gBAAgB,CAACT,KAAK,CAAC,CAAA;EAEvBpC,IAAAA,QAAQ,CAAC/F,OAAO,CAAC,UAACmC,KAAK,EAAK;EAC1B;QACAgG,KAAK,CAAC9B,EAAE,CAACwC,WAAW,CAACT,SAAS,CAACjG,KAAK,CAAC,CAAC,CAAA;EACxC,KAAC,CAAC,CAAA;EACJ,GAAC,MAAM;EACL;MACAgG,KAAK,CAAC9B,EAAE,GAAGqC,QAAQ,CAACI,cAAc,CAACpE,IAAI,CAAC,CAAA;EAC1C,GAAA;IACA,OAAOyD,KAAK,CAAC9B,EAAE,CAAA;EACjB,CAAA;;EAEA;EACA;EACA;;EAEA,SAASuC,gBAAgBA,CAACT,KAAK,EAAE;EAC/B,EAAA,IAAI9B,EAAE,GAAG8B,KAAK,CAAC9B,EAAE,CAAA;EACjB,EAAA,IAAI0C,QAAQ,GAAGZ,KAAK,CAAC7G,IAAI,IAAI,EAAE,CAAA;EAC/B,EAAA,KAAK,IAAIN,GAAG,IAAI+H,QAAQ,EAAE;MACxB,IAAI/H,GAAG,IAAI,OAAO,EAAE;EAClB;EACA,MAAA,KAAK,IAAIgI,SAAS,IAAID,QAAQ,CAACE,KAAK,EAAE;UACpC5C,EAAE,CAAC4C,KAAK,CAACD,SAAS,CAAC,GAAGD,QAAQ,CAACE,KAAK,CAACD,SAAS,CAAC,CAAA;EACjD,OAAA;EACF,KAAC,MAAM,IAAIhI,GAAG,IAAI,OAAO,EAAE;EACzBqF,MAAAA,EAAE,CAAC6C,SAAS,GAAG7C,EAAE,CAAM,OAAA,CAAA,CAAA;EACzB,KAAC,MAAM;QACLA,EAAE,CAAC8C,YAAY,CAACnI,GAAG,EAAE+H,QAAQ,CAAC/H,GAAG,CAAC,CAAC,CAAA;EACrC,KAAA;EACF,GAAA;EACF;;EC/CO,SAASoI,cAAcA,CAACC,GAAG,EAAE;EAClCA,EAAAA,GAAG,CAAC1J,SAAS,CAAC2J,OAAO,GAAG,UAAUnB,KAAK,EAAE;MACvC,IAAM9G,EAAE,GAAG,IAAI,CAAA;EACf4G,IAAAA,KAAK,CAAC5G,EAAE,CAACkI,GAAG,EAAEpB,KAAK,CAAC,CAAA;KACrB,CAAA;EACH,CAAA;EAEO,SAASqB,cAAcA,CAACnI,EAAE,EAAEgF,EAAE,EAAE;EACrCoD,EAAAA,QAAQ,CAACpI,EAAE,EAAC,aAAa,CAAC,CAAA;;EAE1B;IACAA,EAAE,CAACiI,OAAO,CAACjI,EAAE,CAACqI,OAAO,EAAE,CAAC,CAAA;EAGxBD,EAAAA,QAAQ,CAACpI,EAAE,EAAC,SAAS,CAAC,CAAA;EACxB,CAAA;EAEO,SAASoI,QAAQA,CAACpI,EAAE,EAAES,IAAI,EAAE;EACjC;EACA,EAAA,IAAM6H,QAAQ,GAAGtI,EAAE,CAACiC,QAAQ,CAACxB,IAAI,CAAC,CAAA;EAClC,EAAA,IAAI6H,QAAQ,EAAE;EACZ,IAAA,KAAK,IAAIhD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgD,QAAQ,CAACvJ,MAAM,EAAEuG,CAAC,EAAE,EAAE;QACxCgD,QAAQ,CAAChD,CAAC,CAAC,CAAC/C,IAAI,CAACvC,EAAE,CAAC,CAAC;EACvB,KAAA;EACF,GAAA;EACF;;ECrBO,SAASuI,SAASA,CAACP,GAAG,EAAE;EAC7BA,EAAAA,GAAG,CAAC1J,SAAS,CAACkK,KAAK,GAAG,UAAUzH,OAAO,EAAE;MACvC,IAAMf,EAAE,GAAG,IAAI,CAAA;EACf;EACA;EACAA,IAAAA,EAAE,CAACiC,QAAQ,GAAGrB,YAAY,CAACZ,EAAE,CAACyI,WAAW,CAAC1H,OAAO,EAAEA,OAAO,CAAC,CAAA;EAC3DqH,IAAAA,QAAQ,CAACpI,EAAE,EAAE,cAAc,CAAC,CAAA;;EAE5B;EACA;MACA+B,SAAS,CAAC/B,EAAE,CAAC,CAAA;;EAEb;EACAoI,IAAAA,QAAQ,CAACpI,EAAE,EAAE,SAAS,CAAC,CAAA;;EAEvB;EACA;EACA;EACA;;EAEA;EACA,IAAA,IAAIA,EAAE,CAACiC,QAAQ,CAAC+C,EAAE,EAAE;QAClBhF,EAAE,CAAC0I,MAAM,CAAC1I,EAAE,CAACiC,QAAQ,CAAC+C,EAAE,CAAC,CAAA;EAC3B,KAAA;KACD,CAAA;EAEDgD,EAAAA,GAAG,CAAC1J,SAAS,CAACoK,MAAM,GAAG,UAAU1D,EAAE,EAAE;EACnC;MACA,IAAMhF,EAAE,GAAG,IAAI,CAAA;EACf,IAAA,IAAMe,OAAO,GAAGf,EAAE,CAACiC,QAAQ,CAAA;EAC3B+C,IAAAA,EAAE,GAAGqC,QAAQ,CAACsB,aAAa,CAAC3D,EAAE,CAAC,CAAA;MAC/BhF,EAAE,CAACkI,GAAG,GAAGlD,EAAE,CAAA;EAEX,IAAA,IAAI,CAACjE,OAAO,CAAC2F,MAAM,EAAE;EACnB;EACA,MAAA,IAAIF,QAAQ,GAAGzF,OAAO,CAACyF,QAAQ,CAAA;EAC/B,MAAA,IAAI,CAACA,QAAQ,IAAIxB,EAAE,EAAE;UACnBwB,QAAQ,GAAGxB,EAAE,CAAC4D,SAAS,CAAA;EACzB,OAAA;EACA;EACA;EACA,MAAA,IAAMlC,MAAM,GAAGH,kBAAkB,CAACC,QAAQ,CAAC,CAAA;QAC3CzF,OAAO,CAAC2F,MAAM,GAAGA,MAAM,CAAA;EACzB,KAAA;;EAEA;EACAyB,IAAAA,cAAc,CAACnI,EAAM,CAAC,CAAA;KACvB,CAAA;EACH;;ECtDO,SAAS6I,WAAWA,CAACb,GAAG,EAAE;EAChCA,EAAAA,GAAG,CAAC1J,SAAS,CAAC+J,OAAO,GAAG,YAAY;MACjC,IAAMrI,EAAE,GAAG,IAAI,CAAA;EACf,IAAA,IAAM0G,MAAM,GAAG1G,EAAE,CAACiC,QAAQ,CAACyE,MAAM,CAAA;EACjC,IAAA,IAAII,KAAK,GAAGJ,MAAM,CAACnE,IAAI,CAACvC,EAAE,CAAC,CAAA;EAC3B4B,IAAAA,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEiF,KAAK,CAAC,CAAA;EACrC,IAAA,OAAOA,KAAK,CAAA;KACb,CAAA;;EAED;EACAkB,EAAAA,GAAG,CAAC1J,SAAS,CAACwK,EAAE,GAAG,YAAY;EAC7B;EACA,IAAA,OAAOxB,aAAa,CAAAnI,KAAA,CAAA,KAAA,CAAA,EAAIL,SAAS,CAAC,CAAA;KACnC,CAAA;EACDkJ,EAAAA,GAAG,CAAC1J,SAAS,CAACyK,EAAE,GAAG,UAAU1F,IAAI,EAAE;EACjC;MACA,OAAO2F,eAAe,CAAC3F,IAAI,CAAC,CAAA;KAC7B,CAAA;EACD2E,EAAAA,GAAG,CAAC1J,SAAS,CAAC2K,EAAE,GAAG,UAAUC,GAAG,EAAE;EAChC;EACA,IAAA,OAAOA,GAAG,IAAI,IAAI,GACd,EAAE,GACFpH,OAAA,CAAOoH,GAAG,KAAI,QAAQ,GACtBtD,IAAI,CAACC,SAAS,CAACqD,GAAG,CAAC,GACnBA,GAAG,CAAA;KACR,CAAA;EACH,CAAA;;EAEA;EACA,SAAS5B,aAAaA,CAAC9C,GAAG,EAA0B;EAAA,EAAA,IAAxBvE,IAAI,GAAAnB,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAqK,SAAA,GAAArK,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE,CAAA;IAAA,KAAAD,IAAAA,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAAK2F,QAAQ,OAAArG,KAAA,CAAAQ,IAAA,GAAAA,CAAAA,GAAAA,IAAA,WAAAI,IAAA,GAAA,CAAA,EAAAA,IAAA,GAAAJ,IAAA,EAAAI,IAAA,EAAA,EAAA;EAARyF,IAAAA,QAAQ,CAAAzF,IAAA,GAAAH,CAAAA,CAAAA,GAAAA,SAAA,CAAAG,IAAA,CAAA,CAAA;EAAA,GAAA;IAChD,OAAO6H,KAAK,CAACtC,GAAG,EAAEvE,IAAI,EAAEA,IAAI,CAACN,GAAG,EAAE+E,QAAQ,CAAC,CAAA;EAC7C,CAAA;EACA,SAASsE,eAAeA,CAAC3F,IAAI,EAAE;IAC7B,OAAOyD,KAAK,CAACqC,SAAS,EAAEA,SAAS,EAAEA,SAAS,EAAEA,SAAS,EAAE9F,IAAI,CAAC,CAAA;EAChE,CAAA;EACA;EACA,SAASyD,KAAKA,CAACtC,GAAG,EAAEvE,IAAI,EAAEN,GAAG,EAAE+E,QAAQ,EAAErB,IAAI,EAAE;IAC7C,OAAO;EACLmB,IAAAA,GAAG,EAAHA,GAAG;EACHvE,IAAAA,IAAI,EAAJA,IAAI;EACJN,IAAAA,GAAG,EAAHA,GAAG;EACH+E,IAAAA,QAAQ,EAARA,QAAQ;EACRrB,IAAAA,IAAI,EAAJA,IAAAA;KACD,CAAA;EACH;;EC1CO,SAAS+F,aAAaA,CAACpB,GAAG,EAAE;EACjCA,EAAAA,GAAG,CAACjH,OAAO,GAAG,EAAE,CAAC;EACjBiH,EAAAA,GAAG,CAACqB,KAAK,GAAG,UAAUA,KAAK,EAAE;EAC3B;EACA;MACF,IAAI,CAACtI,OAAO,GAAGH,YAAY,CAAC,IAAI,CAACG,OAAO,EAAEsI,KAAK,CAAC,CAAA;KAC/C,CAAA;EACH;;ECJA,SAASrB,GAAGA,CAACjH,OAAO,EAAE;EACpB,EAAA,IAAI,CAACyH,KAAK,CAACzH,OAAO,CAAC,CAAC;EACtB,CAAA;;EAEA;EACAwH,SAAS,CAACP,GAAG,CAAC,CAAC;EACfD,cAAc,CAACC,GAAG,CAAC,CAAC;EACpBa,WAAW,CAACb,GAAG,CAAC,CAAC;;EAEjB;EACAoB,aAAa,CAACpB,GAAG,CAAC;;;;;;;;"}